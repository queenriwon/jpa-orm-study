# 2025-05-11 스터디 일지
참여 인원: 서지원, 이지은, 전승민 <br>
발표자: 전승민 <br>
작성자: 이지은 <br>
범위: Chapter.15 고급 주제와 성능 최적화 ~ Chapter.16 트랜잭션과 락, 2차 캐시

---

## 읽기 전용 최적화 방법 정리
읽기 전용 트랜잭션 사용: 플러시를 작동하지 않도록 하여 성능 향상
`@Transactional(readOnly = true)`

<br>

## 15챕 정리
* JPA 의 예외는 트랜잭션 롤백을 표시하는 예외와 표시하지 않는 예외로 나눈다. 트랜잭션을 롤백하는 예외는 심각한 예외이므로 트랜잭션을 강제로 커밋해도 커밋되지 않고 롤백된다 
* 같은 영속성 컨텍스트의 엔티티를 비교할 때는 동일성 비교를 할 수 있지만 영속성 컨텍스트가 다르면 동일성 비교에 실패한다 따라서 잘 변하지 않는 비즈니스 키를 사용한 동등성 비교를 해야한다 
* JPA 를 사용할 때는 N+1 문제를 가장 조심해야한다. 주로 페치조인을 사용해서 해결 
* 대량의 엔티티를 배치 처리하려면 적절한 시점에 플러시를 호출하고 영속성 컨텍스트를 초기화해야함


<br>

## 낙관적 락과 비관적 락
* 낙관적 락: 실행먼저 하고 충돌이 일어났는지는 나중에 확인, `version`으로 충돌 확인
* 비관적 락: 데이터베이스 수준의 락, 충돌을 아예 막는 락

<br>

## 2차 캐시 적용 전과 후의 좋은 점
* DB와 서버 사이의 네트워크 물리적 거리 및 비용을 줄이기 위해서 사용

<br>

## 언체크 예외란?
* 컴파일 예외

<br>

## 동시성 제어 해결방법: MVCC란?
하나의 데이터를 여러 버전으로 관리해서, 트랜잭션마다 자신에게 맞는 버전을 읽도록 함. 
## 동시성 제어 해결방법: 스레드 로컬?
동시성 문제를 공유하지 않는 방법
<https://upcurvewave.tistory.com/742>